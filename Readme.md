# üñ• Telegram Server Monitor Bot

Telegram –±–æ—Ç –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ Linux —Å–µ—Ä–≤–µ—Ä–∞ —Å –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º —Å—Ç–∞—Ç—É—Å–∞.

## ‚ö° –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (1 –∫–æ–º–∞–Ω–¥–∞)

```bash
curl -sL https://raw.githubusercontent.com/tarpy-socdev/Telegram-control-agent/dev/install.sh | sudo bash -s install
```

–ò–ª–∏:

```bash
wget https://raw.githubusercontent.com/tarpy-socdev/Telegram-control-agent/dev/install.sh
chmod +x install.sh
sudo ./install.sh install
```

## üéØ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- **CPU, RAM, Disk, Network** - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
- **Uptime** - –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã
- **–°–ª—É–∂–±—ã** - –≤—Å–µ —Ä–∞–±–æ—Ç–∞—é—â–∏–µ systemd —Å–ª—É–∂–±—ã  
- **–ü–æ—Ä—Ç—ã** - –≤—Å–µ –æ—Ç–∫—Ä—ã—Ç—ã–µ –ø–æ—Ä—Ç—ã —Å –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏
- **–ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ** - —Å—Ç–∞—Ç—É—Å –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç –ë–ï–ó –°–ü–ê–ú–ê!

### üéÆ –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞
```
/status              - –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å
/services            - –°–ø–∏—Å–æ–∫ —Å–ª—É–∂–±
/ports               - –û—Ç–∫—Ä—ã—Ç—ã–µ –ø–æ—Ä—Ç—ã
/ping <host>         - –ü–∏–Ω–≥ —Ö–æ—Å—Ç–∞
/test_update         - –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å —Å–µ–π—á–∞—Å
/send_to_channel     - –û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ –∫–∞–Ω–∞–ª
/restart_service     - –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–ª—É–∂–±
/reboot              - –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞
/logs                - –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
/close_port          - –ó–∞–∫—Ä—ã—Ç—å –ø–æ—Ä—Ç
```

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### –®–∞–≥ 1: –£—Å—Ç–∞–Ω–æ–≤–∏
```bash
sudo ./install.sh install
```

### –®–∞–≥ 2: –ü–æ–ª—É—á–∏ —Ç–æ–∫–µ–Ω
1. –û—Ç–∫—Ä–æ–π [@BotFather](https://t.me/BotFather)
2. –û—Ç–ø—Ä–∞–≤—å `/newbot`
3. –°–∫–æ–ø–∏—Ä—É–π —Ç–æ–∫–µ–Ω

### –®–∞–≥ 3: –£–∑–Ω–∞–π ID
1. –û—Ç–∫—Ä–æ–π [@userinfobot](https://t.me/userinfobot)
2. –û—Ç–ø—Ä–∞–≤—å `/start`
3. –°–∫–æ–ø–∏—Ä—É–π ID

### –®–∞–≥ 4: –ù–∞—Å—Ç—Ä–æ–π
```bash
sudo ./install.sh configure
# –í–≤–µ–¥–∏ —Ç–æ–∫–µ–Ω –∏ ID
```

### –®–∞–≥ 5: –ó–∞–ø—É—Å—Ç–∏
```bash
sudo ./install.sh start
```

### –®–∞–≥ 6: –î–æ–±–∞–≤—å –≤ –∫–∞–Ω–∞–ª
1. –°–æ–∑–¥–∞–π –∫–∞–Ω–∞–ª –≤ Telegram
2. –î–æ–±–∞–≤—å –±–æ—Ç–∞ –∫–∞–∫ **–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞**
3. –î–∞–π –ø—Ä–∞–≤–∞: –ø—É–±–ª–∏–∫–∞—Ü–∏—è + —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

**–ì–æ—Ç–æ–≤–æ!** –ë–æ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç —Å—Ç–∞—Ç—É—Å –∏ –±—É–¥–µ—Ç –æ–±–Ω–æ–≤–ª—è—Ç—å –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç.

## üîß –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

–í—Å–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ **–æ–¥–∏–Ω —Å–∫—Ä–∏–ø—Ç** `install.sh`:

### –°–µ—Ä–≤–∏—Å
```bash
sudo ./install.sh start       # –ó–∞–ø—É—Å—Ç–∏—Ç—å
sudo ./install.sh stop        # –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
sudo ./install.sh restart     # –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
sudo ./install.sh status      # –°—Ç–∞—Ç—É—Å
```

### –õ–æ–≥–∏
```bash
sudo ./install.sh logs 200      # –ü–æ—Å–ª–µ–¥–Ω–∏–µ 200 —Å—Ç—Ä–æ–∫
sudo ./install.sh logs-live     # –í —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
sudo ./install.sh diagnose      # –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞
```bash
sudo ./install.sh configure      # –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
sudo ./install.sh show-config    # –ü–æ–∫–∞–∑–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ
```bash
sudo ./install.sh update        # –û–±–Ω–æ–≤–∏—Ç—å —Å GitHub
sudo ./install.sh backup        # –ë—ç–∫–∞–ø
sudo ./install.sh restore       # –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
```

### –£—Ç–∏–ª–∏—Ç—ã
```bash
./install.sh escape "text"          # –≠–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞—Ç—å Markdown
./install.sh test-ping google.com   # –¢–µ—Å—Ç ping
./install.sh test-status            # –¢–µ—Å—Ç —Å—Ç–∞—Ç—É—Å–∞
```

### –£–¥–∞–ª–µ–Ω–∏–µ
```bash
sudo ./install.sh uninstall
```

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ë–æ—Ç –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
```bash
sudo ./install.sh diagnose
sudo ./install.sh logs 50
```

### –û—à–∏–±–∫–∞ "Can't parse entities"
```bash
sudo ./install.sh update
sudo ./install.sh restart
```

### –ö–æ–º–∞–Ω–¥—ã –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç
```bash
sudo ./install.sh show-config
# –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ —Ç–≤–æ–π ID –≤ ADMIN_IDS
```

## üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ

```bash
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
sudo ./install.sh update
sudo ./install.sh restart

# –ò–ª–∏ —á–µ—Ä–µ–∑ curl
curl -sL https://raw.githubusercontent.com/tarpy-socdev/Telegram-control-agent/dev/server_monitor_bot.py -o /tmp/bot.py
sudo cp /tmp/bot.py /opt/server-monitor-bot/server_monitor_bot.py
sudo ./install.sh restart
```

## üìã –ü—Ä–∏–º–µ—Ä—ã

### –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —É–ø–∞–≤—à–µ–π —Å–ª—É–∂–±—ã
```
–¢—ã: /restart_service nginx
–ë–æ—Ç: ‚ö†Ô∏è –í—ã —É–≤–µ—Ä–µ–Ω—ã?
     [‚úÖ –î–∞] [‚ùå –û—Ç–º–µ–Ω–∞]
–¢—ã: *–Ω–∞–∂–∏–º–∞–µ—à—å –î–∞*
–ë–æ—Ç: ‚úÖ –°–ª—É–∂–±–∞ nginx –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω–∞
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤
```
–¢—ã: /logs nginx 50
–ë–æ—Ç: üìã –õ–æ–≥–∏ nginx:
     [–ø–æ—Å–ª–µ–¥–Ω–∏–µ 50 —Å—Ç—Ä–æ–∫]
```

### –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ—Ä—Ç–∞
```
–¢—ã: /close_port 8080
–ë–æ—Ç: ‚ö†Ô∏è –í—ã —É–≤–µ—Ä–µ–Ω—ã?
–¢—ã: *–î–∞*
–ë–æ—Ç: ‚úÖ –ü–æ—Ä—Ç 8080 –∑–∞–∫—Ä—ã—Ç
```

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏

### –ò–∑–º–µ–Ω–∏—Ç—å –∏–Ω—Ç–µ—Ä–≤–∞–ª –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
```bash
sudo nano /opt/server-monitor-bot/server_monitor_bot.py

# –ù–∞–π–¥–∏ –∏ –∏–∑–º–µ–Ω–∏:
UPDATE_INTERVAL = 60   # 1 –º–∏–Ω—É—Ç–∞
UPDATE_INTERVAL = 300  # 5 –º–∏–Ω—É—Ç (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
UPDATE_INTERVAL = 600  # 10 –º–∏–Ω—É—Ç

sudo ./install.sh restart
```

### –î–æ–±–∞–≤–∏—Ç—å –∞–¥–º–∏–Ω–æ–≤
```bash
sudo ./install.sh configure
# –í–≤–µ–¥–∏ ID —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é: 123456789, 987654321
```

## üõ°Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- ‚úÖ –¢–æ–ª—å–∫–æ –∞–¥–º–∏–Ω—ã –º–æ–≥—É—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å –∫–æ–º–∞–Ω–¥—ã
- ‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –æ—Ç root (–Ω—É–∂–Ω–æ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–ª—É–∂–±–∞–º–∏)

## üìù –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- **–û–°:** Ubuntu 20.04+ / Debian 10+
- **Python:** 3.8+
- **RAM:** 100MB –º–∏–Ω–∏–º—É–º
- **–ü—Ä–∞–≤–∞:** root (–¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–ª—É–∂–±–∞–º–∏)

## üìú –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License - –¥–µ–ª–∞–π —á—Ç–æ —Ö–æ—á–µ—à—å!

## ü§ù –ö–æ–Ω—Ç—Ä–∏–±—å—é—Ü–∏—è

–ù–∞—à–µ–ª –±–∞–≥? –ï—Å—Ç—å –∏–¥–µ–∏? –°–æ–∑–¥–∞–π Issue –Ω–∞ GitHub!

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

- **GitHub:** [Issues](https://github.com/tarpy-socdev/Telegram-control-agent/issues)
- **Telegram:** –°–æ–∑–¥–∞–π Issue –∏ –º—ã –ø–æ–º–æ–∂–µ–º

---

**–°–¥–µ–ª–∞–Ω–æ —Å ‚ù§Ô∏è –¥–ª—è –ø—Ä–æ—Å—Ç–æ–≥–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Å–µ—Ä–≤–µ—Ä–æ–≤**
